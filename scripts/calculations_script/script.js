// import {calcScores, normalizeTestResults, getTestResultsChart, saveResults} from './helpers';
// import * as helpers from './helpers';
var helpers = require('./helpers');



const data = {'total_items': 1, 'page_count': 1, 'items': [{'landing_id': '8ly72fez3ze2z208lyopuep0khhwmopu', 'token': '8ly72fez3ze2z208lyopuep0khhwmopu', 'response_id': '8ly72fez3ze2z208lyopuep0khhwmopu', 'landed_at': '2021-02-08T10:08:48Z', 'submitted_at': '2021-02-08T10:28:48Z', 'metadata': {'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36', 'platform': 'other', 'referer': 'https://kpbwd338my8.typeform.com/to/Edtmnimf?typeform-embed=embed-widget&typeform-source=augmentek.online&typeform-medium=embed-sdk&embed-hide-headers=true&embed-opacity=0&typeform-embed-id=6vgiy', 'network_id': '55bcd1d7a3', 'browser': 'default'}, 'hidden': {}, 'calculated': {'score': 0}, 'answers': [{'field': {'id': '6eFPM5VpUNJp', 'ref': 'fb3c633b-af08-41d1-9dce-5ee11ae205db', 'type': 'short_text'}, 'type': 'text', 'text': 'Джон'}, {'field': {'id': 'OdoEc7ddG2SB', 'ref': '01EWFVBMK4P8GFSCMYESCWMC4P', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'ZWaaVbkqnO5q', 'label': 'на днях'}}, {'field': {'id': 'uMC84D6rr5Wv', 'ref': '01EWFVBMNDJEXQZKJ1FPDZJ9KR', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'T8mtIq1QnRV4', 'label': 'вышло не то что я хотел(а), но тоже что-то'}}, {'field': {'id': 'Rzh2cU6bWNUI', 'ref': '35d75188-0632-4180-8b18-bd01324667c5', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': '7GX4HGrXFXHR', 'label': 'Скорее нет'}}, {'field': {'id': 'MbZ9vZB272HQ', 'ref': '3d3a3e8e-8aca-40ac-b81d-466747ddd664', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'mpIWsdEGX0Sq', 'label': '25-50'}}, {'field': {'id': 'DKXhZ9HlYZ0p', 'ref': '73360e83-bc62-4b6e-b644-ea0a52109085', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': '8NzXRTppA3ed', 'label': 'Реально маловероятные события'}}, {'field': {'id': 'nNbnUL48w7ll', 'ref': '262d368e-e958-476a-87a0-910f37a722e4', 'type': 'multiple_choice'}, 'type': 'choices', 'choices': {'ids': ['YGcSE2eplNuG'], 'labels': ['Дело маленькое']}}, {'field': {'id': 'FdEyDlYetpzS', 'ref': '380672f4-a786-4192-ac79-4d8b6d403e22', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'xJfQYwqizygK', 'label': 'Месяцы'}}, {'field': {'id': '34T5xECmbdmk', 'ref': 'ea808a67-b813-47f0-a5e6-8503d0904b84', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'XiWBNHKC19aN', 'label': 'Не помню'}}, {'field': {'id': 'JxLkeXKk61QO', 'ref': 'a97e8bcb-7d07-4998-abe3-17120fff0add', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'eyJVZwrf7CYi', 'label': 'Нет, и меня это парит'}}, {'field': {'id': 'izCDslNPRXpB', 'ref': '11e8adbb-cfe1-43c0-acb6-6dd0c33fabb3', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'DiPX40QNpI61', 'label': 'Когда как'}}, {'field': {'id': '5X09RKtOZjm6', 'ref': '0b6db72c-ff8f-428f-9f70-8f32dfa1493d', 'type': 'multiple_choice'}, 'type': 'choices', 'choices': {'ids': ['A3mm3Rk0M31A', '5Ld0gOX76Ibq'], 'labels': ['Очень четкий план', 'Несгибаемая воля']}}, {'field': {'id': '8H2guBrkeP7O', 'ref': '2172d7de-bda5-4fdf-ab76-09c4c3d2a23a', 'type': 'multiple_choice'}, 'type': 'choices', 'choices': {'ids': ['ZIOz25cFqhfD', 'xeNluP5Flvcu', 'EzgRM8iDsgIK'], 'labels': ['Кончились силы, мотивация', 'Стало ясно, что делать это не нужно, а нужно другое. Лошадь сдохла, слезаю!', 'Появились более приоритетные задачи']}}, {'field': {'id': 'q0dCnVFpxdlU', 'ref': '9aa0229d-f583-461c-a588-385ea092c8d1', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'bmXKhr4vqISx', 'label': 'Каждый день листаю ленту пока не начинают болеть глаза, страдает работа'}}, {'field': {'id': 'Wqy2TryCkt16', 'ref': 'e5a06bc6-e607-40ae-846e-598268c034a3', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': '5zbxxHACki9e', 'label': 'Потусить с друзьями'}}, {'field': {'id': '5kNrQQRqYehf', 'ref': '6af16581-3e17-4d88-bc3c-a38df155eb10', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'rQ5iAEAjtqbj', 'label': 'Пробовал(а), было хорошо, но сейчас нет'}}, {'field': {'id': 'IdkOzLCk0HNw', 'ref': '284c2d17-3da4-4e8f-a3b0-6c63cf3058bf', 'type': 'multiple_choice'}, 'type': 'choices', 'choices': {'ids': ['nvkzfhpwNroh', 'kVbtmSOwZoLs'], 'labels': ['Утренние ритуалы', 'Вечерние ритуалы']}}, {'field': {'id': 'EreqncRgsWn0', 'ref': '0cfea30e-c272-4cc4-963a-ff4737b9d557', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'CcbZPmvlpu8Z', 'label': 'Ритуалы молодые, еще не знаю как пойдет'}}, {'field': {'id': '1bHayhUCtQjP', 'ref': 'c0e5cdd3-266e-43e4-80fc-0e716c77e240', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'PLAFBM1nTiai', 'label': 'Делаю это от случая к случаю'}}, {'field': {'id': 'meTrdKblIZSN', 'ref': 'a8b61c2d-d4cd-4be3-bfa2-f304865c11b1', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'K41dBW7ZU5Jh', 'label': 'Бывает'}}, {'field': {'id': 'yV44WJOYTC6e', 'ref': '609cd414-3038-44ed-adbd-b3cf5e527b68', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'EeKXkhNCWYWQ', 'label': 'Другие'}}, {'field': {'id': '8zCyYGkrPlaJ', 'ref': 'b9fcb8d9-fa26-43b2-b367-4e4292fbe727', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'JWqVlvjob3ZG', 'label': 'Я отстаиваю свои интересы успешно'}}, {'field': {'id': 'zxF99etmiFtY', 'ref': '302d55a2-42ba-45d9-8551-6123c0bb1860', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'XNqgAvpHSSWa', 'label': 'Устаю, но конфликты не лучше!'}}, {'field': {'id': 'i0GtqWogl8kb', 'ref': '4fedac54-8a83-4140-b321-b60daeaf1cc6', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': '3KcL5z6n2jqb', 'label': 'Бывает'}}, {'field': {'id': 'EXmZbgfTF9Pk', 'ref': '80690574-cedf-44bf-9159-3b739cff0484', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'UyZSATVV5F4j', 'label': 'Никто не меняет мнение'}}, {'field': {'id': 's9BDip9wMLsz', 'ref': '5e5aa725-bba8-439c-9341-ac180d31c53f', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': '7ezx8PsmUjg5', 'label': 'Было, убедил другой человек'}}, {'field': {'id': 'n4iQuU5aWMDa', 'ref': '7bf942ce-ad40-43ad-bdb5-96c5c4ebff4a', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'Sp8c7KTRrCWX', 'label': 'Больше 10'}}, {'field': {'id': 'KsCxR4Y4avgN', 'ref': 'c42ec71c-621b-4384-87a0-f733e03ab2dc', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'm0wW39oFbCLr', 'label': 'Раньше да, теперь нет'}}, {'field': {'id': 'gTUHNaRp7tlT', 'ref': '1ccce458-afc6-4113-82fc-60b0710ab6c7', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': '1WHBmZgQTY2j', 'label': 'Мое представление о себе полностью перевернулось'}}, {'field': {'id': 'zcflyR11VK8g', 'ref': 'f18021e2-5915-400c-b38a-4e3adcd95d85', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'RQ8RMgVGuJi6', 'label': 'С трудом'}}, {'field': {'id': 'Nne8pL9nCV9j', 'ref': '87ae6823-c08f-4aee-bbc8-bace5f650e36', 'type': 'number'}, 'type': 'number', 'number': 4}, {'field': {'id': 'LuDWSJyfQ3JY', 'ref': 'aa9ad862-d4e8-474c-bd1d-1d1d3af8e170', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'JEWy328uIhtg', 'label': 'Пришлось подумать, но получилось'}}, {'field': {'id': 'tTLVzxI9fQ19', 'ref': 'f4f4e06e-78eb-4e84-8512-9c8748f3698e', 'type': 'short_text'}, 'type': 'text', 'text': '9'}, {'field': {'id': 'AhpELuPt62gX', 'ref': '3cd3c7b8-9499-42c9-b6dc-452fc8b31c48', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'BtMp1neFZxWz', 'label': 'Пришлось подумать, но получилось'}}, {'field': {'id': 'DVkMAOmuV66z', 'ref': '42e29c2e-e552-47ed-960c-f0ee3a556d3b', 'type': 'multiple_choice'}, 'type': 'choice', 'choice': {'id': 'Krrysm9KT4c7', 'label': 'стремится к нулю'}}, {'field': {'id': 'aDOktxJVdJPO', 'ref': '2c06d7fe-ba51-4e82-abe1-adb8cc897cf2', 'type': 'short_text'}, 'type': 'text', 'text': 'johnotis@yandex.ru'}]}]}



const answers = data["items"][0]["answers"];
const scores = helpers.calcScores(answers);
const name = answers[0]["text"];
const email = answers[36]["text"];
const response_id = data["items"][0]["response_id"];
const referer = data["items"][0]["metadata"]["referer"];

console.log("scores", scores);
const normalizedScores = helpers.normalizeTestResults(scores);
let [planning, execution, communication, learning, agency, awareness, estimations] = normalizedScores;
console.log("normalized [planning, execution, communication, learning, agency, awareness, estimations]",  [planning, execution, communication, learning, agency, awareness, estimations]);
helpers.saveResults(normalizedScores, name, email, response_id, referer);
